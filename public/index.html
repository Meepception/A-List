<!DOCTYPE html>
<html>

<head>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            height: 100%;
            background-color: #817e7e;
            box-sizing: border-box;
        }

        h1 {
            color: #fff;
            font-size: 3rem;
            font-weight: 50;
            text-align: center;
            margin: 1rem 0 3rem;
            font-family: 'Bahnschrift', sans-serif;
        }

        .title {
            color: #fff;
            text-transform: uppercase;
            font-weight: 800;
        }

        .inputDiv {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .input {
            padding: 0.5rem 1rem;
            outline: none;
            border: none;
            height: 50px;
            border-radius: 25px;
            width: 350px;
            margin: 0.25rem;
            transition: .5s;
            font-size: 1.15rem;
        }

        .add {
            outline: none;
            border: none;
            height: 50px;
            border-radius: 25px;
            width: 50px;
            background-color: #d1002c;
            cursor: pointer;
            transition: .5s;
            margin: 0.25rem;
        }

        .add:hover {
            opacity: 0.7;
        }


        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            margin-top: 2rem;

        }

        

        .item {
            padding: 0.5rem;
            border-bottom: 5px solid #fff;
            margin-bottom: 1.5rem;
        }

        .item_input {
            background: none;
            outline: none;
            border: none;
            color: #fff;
            font-size: 1.4rem;
            width: 370px;
        }

        .remove {
            background: none;
            outline: none;
            border: none;
            color: #d1002c;
            font-size: 1.4rem;
            font-family: 'Bahnschrift', sans-serif;
            cursor: pointer;
        }

        .edit {
            background: none;
            outline: none;
            border: none;
            color: #fff;
            font-size: 1.4rem;
            font-family: 'Bahnschrift', sans-serif;
            margin: 0 0.5rem;
            cursor: pointer;
        }
        

        nav {
            width: 100%;
            height: 60px;
            background-color: #fff;
        }

        nav p {
            font-family: sans-serif;
            color: #222;
            font-size: 24px;
            line-height: 55px;
            float: left;
            padding: 0px 30px;
        }

        nav ul {
            float: left;
        }

        nav ul li {
            float: left;
            list-style: none;
            position: relative;
        }

        nav ul li a {
            display: block;
            font-family: sans-serif;
            color: #222;
            font-size: 14px;
            padding: 22px 14px;
            text-decoration: none;
        }

        nav ul li ul {
            display: none;
            position: absolute;
            background-color: #fff;
            padding: 10px;
            border-radius: 0px 0px 4px 4px;

        }

        nav ul li:hover ul {
            display: block;

        }



        nav ul li ul li {
            width: 100px;
            border-radius: 4px;
        }

        nav ul li ul li a {
            padding: 8px 14px;
        }

        nav ul li ul li a:hover {
            background-color: palevioletred;
        }
    </style>

    <head>
        <meta charset="UTF-8">
    </head>

<body>

    <nav>
        <p>A-LIST</p>
        <ul>
            <li><a href="hovedmeny.html">Hjem</a></li>
            <li><a href="Huskeliste.html">Huskeliste</a></li>
            <li><a href="kalender.html">Kalender</a></li>
            <li><a href="minside.html">Min Side</a></li>
            <li><a href="#">Bruker</a>
                <ul>
                    <li><a href="logginn.html">Logg inn</a></li>
                    <li><a href="registrerdeg.html">Registrer deg</a></li>

                </ul>


            </li>


        </ul>



    </nav>
    </style>
    <meta charset='UTF-8'>


    <title>Huskeliste</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>


    </head>

    <body>
        <h1><span class="title">Huskeliste</span></h1>
        <div class="inputDiv">

            <input type="text" id="listInput">

        <button id="updateDB">update</button>
        <button id="purgeDatabase">Slett innhold i listen</button>
        
            
            
        </div>
        <div class="container">
            <div id="resContainer"></div>
            
        </div>

        

        

        <script>

            const listInput = document.getElementById("listInput");
            const resContainer = document.getElementById("resContainer");
            const purgeDatabase = document.getElementById("purgeDatabase");

            loadList();
            async function loadList() {

                let config = {
                    method: "GET",
                }

                try {
                    let response = await fetch("/todo", config);
                    let data = await response.json();

                    if (response.status === 200) {
                        for (let result of data) {
                            let listDiv = document.createElement("div");
                            let list = `
                        <h2>${result.todo}</h2>                       
                    `;

                            listDiv.innerHTML = list;
                            resContainer.appendChild(listDiv)
                        }
                    } else if (response.status === 404) {
                        resTxt.innerText = "No lists found";
                    }
                }
                catch (err) {
                    console.log("Something went wrong.");
                }
                
            }

            document.getElementById("updateDB").onclick = async function(evt) {
                if (listInput.value != "") {
                let body = {
                        input: listInput.value
                    }
                    let config = {
                        method: "POST",
                        headers: {
                            "content-type": "application/json",
                        },
                        body: JSON.stringify(body)
                    }
                    try {
                        let response = await fetch("/todo", config);
                        let data = await response.json();

                    }
                    catch (err) {
                        console.log("Something went wrong.")
                    }

                } else {
                    alert("must type something")
                }
                window.location.reload();
            }

            document.getElementById("purgeDatabase").onclick = async function (evt) {
                let config = {
                    method: "DELETE",
                    headers: {

                    }

                }

                try {
                    let response = await fetch("/purgeDatabase", config);
                    let data = await response.json();

                }
                catch (err) {
                    console.log("Something went wrong.")
                }
                alert("Du har slettet innholdet i listen")
                window.location.reload();
            }



        </script>
    </body>

</html>