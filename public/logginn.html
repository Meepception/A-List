<!DOCTYPE html>
<html>

<head>
<title>Logg inn</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>

 <style>
  body {
    background-color:#161313;
  }
  
  .container {
  background-color: #1d1d20;
  font-family: "arial";
}
 </style>

 <body>
 <h1 style="color: white; font-family: Bahnschrift;">A-LIST</h1> 
 <h4 style="color: white; font-family: Bahnschrift;">By NarwhalDragonfly</h4> 
 </body>

 <head>
 <meta charset="UTF-8">
 </head>

 <div class="container">

 <field id="login">

  <fieldset class="clearfix">

   <h3 style="color: white; font-family: Bahnschrift;">Brukernavn</h3>
   <p><span class="arial"></span><input id="user" value="Brukernavn" type="text"></p>
   <h3 style="color: white; font-family: Bahnschrift;">Passord</h3>
   <p><span class="arial"></span><input id="pass" value="Passord" type="password"></p>
 <button id="login">Logg inn</button>
   <button onclick="document.location='index.html'"> Registrer deg istedenfor </button>
 
  </fieldset>

 <script>
   let user = document.getElementById('user');
   let pass = document.getElementById('pass');
   let login = document.getElementById('login');

  login.addEventListener('click', async ()=>{

    let username = user.value
    let password = pass.value

    credentials = "Basic " + window.btoa(`${username}:${password}`)

    let config = {
        method: "POST",
        headers: {
            "content-type": "application/json",
            "authorization": credentials
        }
    }

    let result = await fetch('/login', config);
    console.log(result);
    if(result.status === 200){

      sessionStorage.setItem('user', username);

      location.href = 'hovedmeny.html';
    }


  });


 </script>

 </html>
